<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Achiko</title>
    <link rel="icon" type="image/x-icon" th:href="@{/images/favicon.ico}" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <script
      src="https://kit.fontawesome.com/a076d05399.js"
      crossorigin="anonymous"
    ></script>

    <link rel="stylesheet" th:href="@{/css/review/reviewRegist.css}" />

    <!-- jQuery 추가 -->
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>

    <!-- JS 파일 추가 -->
    <script th:src="@{/js/review/reviewRegist.js}"></script>

    <!-- <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f8f8f8;
        padding: 30px;
      }

      .container {
        max-width: 1000px;
        margin: auto;
        display: flex;
        gap: 30px;
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      .left-section {
        width: 35%;
      }

      .property-image {
        width: 100%;
        height: 200px;
        border-radius: 10px;
        background-color: #ddd;
      }

      .property-info {
        margin-top: 10px;
        font-size: 14px;
        color: #555;
      }

      .right-section {
        width: 65%;
      }

      .review-header {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 15px;
      }

      .review-description {
        font-size: 14px;
        color: #777;
        margin-bottom: 15px;
      }

      .rating-box {
        padding: 10px 0;
        border-bottom: 1px solid #ddd;
        margin-bottom: 10px;
      }

      .stars {
        display: flex;
        flex-direction: row-reverse;
        justify-content: flex-start;
        gap: 5px;
      }

      .stars input {
        display: none;
      }

      .stars label {
        font-size: 24px;
        cursor: pointer;
        color: #ccc;
      }

      .stars input:checked ~ label,
      .stars label:hover,
      .stars label:hover ~ label {
        color: #ffcc00;
      }

      .comment-box {
        margin-top: 15px;
      }

      .submit-btn {
        background-color: #28a745;
        color: white;
        width: 100%;
        padding: 12px;
        border: none;
        font-size: 16px;
        border-radius: 10px;
        cursor: pointer;
        margin-top: 20px;
      }

      .submit-btn:hover {
        background-color: #218838;
      }
    </style> -->
  </head>
  <body>
    <!-- 헤더 header -->
    <header th:replace="~{fragments/header :: header}"></header>

    <main class="container">
      <div class="review-container">
        <aside class="user-card">
          <img
            th:src="${reviewedUser.profileImage} ?: '/images/default-profile.png'"
            alt="Profile Image"
            class="profile-img"
          />
          <h3 th:text="${reviewedUser.nickname}"></h3>
          <p th:text="${reviewedUser.bio}"></p>
          <div class="user-info">
            <span
              th:text="${reviewedUser.isHost == 0 ? '게스트' : (reviewedUser.isHost == 1 ? '호스트' : '관리자')}"
            ></span>
            · <span th:text="${reviewedUser.nationality}"></span> ·
            <span
              th:text="${reviewedUser.gender == 0 ? '남성' : (reviewedUser.gender == 1 ? '여성' : '기타')}"
            ></span>
            · <span th:text="${reviewedUser.languages}"></span> ·
            <span th:text="${reviewedUser.religion}"></span>
          </div>
        </aside>

        <section class="review-form-container">
          <h2>
            <span th:text="${reviewedUser.realName}"></span>님에 대한 후기를
            작성하세요.
          </h2>
          <p class="review-description">
            14일 동안 후기를 작성할 수 있습니다. 후기를 작성한 후에는 회원님의
            피드백을 받을 수 있습니다.
          </p>

          <form th:action="@{/review/update}" method="post">
            <input
              type="hidden"
              name="reviewId"
              th:value="${review.reviewId}"
            />
            <input
              type="hidden"
              name="reviewedUserId"
              th:value="${reviewedUser.userId}"
            />

            <!--  청결도 -->
            <div class="rating-box">
              <p>
                <strong>청결도</strong>
              </p>
              <div class="stars">
                <input
                  type="radio"
                  name="cleanlinessRating"
                  value="5"
                  id="cleanliness-5"
                  th:checked="${review.cleanlinessRating == 5}"
                /><label for="cleanliness-5">★</label>
                <input
                  type="radio"
                  name="cleanlinessRating"
                  value="4"
                  id="cleanliness-4"
                  th:checked="${review.cleanlinessRating == 4}"
                /><label for="cleanliness-4">★</label>
                <input
                  type="radio"
                  name="cleanlinessRating"
                  value="3"
                  id="cleanliness-3"
                  th:checked="${review.cleanlinessRating == 3}"
                /><label for="cleanliness-3">★</label>
                <input
                  type="radio"
                  name="cleanlinessRating"
                  value="2"
                  id="cleanliness-2"
                  th:checked="${review.cleanlinessRating == 2}"
                /><label for="cleanliness-2">★</label>
                <input
                  type="radio"
                  name="cleanlinessRating"
                  value="1"
                  id="cleanliness-1"
                  th:checked="${review.cleanlinessRating == 1}"
                /><label for="cleanliness-1">★</label>
              </div>
            </div>

            <!--  신뢰도 -->
            <div class="rating-box">
              <p>
                <strong>신뢰도</strong>
              </p>
              <div class="stars">
                <input
                  type="radio"
                  name="trustRating"
                  value="5"
                  id="trust-5"
                  th:checked="${review.trustRating == 5}"
                /><label for="trust-5">★</label>
                <input
                  type="radio"
                  name="trustRating"
                  value="4"
                  id="trust-4"
                  th:checked="${review.trustRating == 4}"
                /><label for="trust-4">★</label>
                <input
                  type="radio"
                  name="trustRating"
                  value="3"
                  id="trust-3"
                  th:checked="${review.trustRating == 3}"
                /><label for="trust-3">★</label>
                <input
                  type="radio"
                  name="trustRating"
                  value="2"
                  id="trust-2"
                  th:checked="${review.trustRating == 2}"
                /><label for="trust-2">★</label>
                <input
                  type="radio"
                  name="trustRating"
                  value="1"
                  id="trust-1"
                  th:checked="${review.trustRating == 1}"
                /><label for="trust-1">★</label>
              </div>
            </div>

            <!--  소통능력 -->
            <div class="rating-box">
              <p>
                <strong>소통능력</strong>
              </p>
              <div class="stars">
                <input
                  type="radio"
                  name="communicationRating"
                  value="5"
                  id="communication-5"
                  th:checked="${review.communicationRating == 5}"
                /><label for="communication-5">★</label>
                <input
                  type="radio"
                  name="communicationRating"
                  value="4"
                  id="communication-4"
                  th:checked="${review.communicationRating == 4}"
                /><label for="communication-4">★</label>
                <input
                  type="radio"
                  name="communicationRating"
                  value="3"
                  id="communication-3"
                  th:checked="${review.communicationRating == 3}"
                /><label for="communication-3">★</label>
                <input
                  type="radio"
                  name="communicationRating"
                  value="2"
                  id="communication-2"
                  th:checked="${review.communicationRating == 2}"
                /><label for="communication-2">★</label>
                <input
                  type="radio"
                  name="communicationRating"
                  value="1"
                  id="communication-1"
                  th:checked="${review.communicationRating == 1}"
                /><label for="communication-1">★</label>
              </div>
            </div>
            <!--  매너 -->
            <div class="rating-box">
              <p>
                <strong>매너</strong>
              </p>
              <p>숙소 제공자는 친절하고 매너가 좋았나요?</p>
              <div class="stars">
                <input
                  type="radio"
                  name="mannerRating"
                  value="5"
                  id="manner-5"
                  th:checked="${review.mannerRating == 5}"
                />
                <label for="manner-5">★</label>
                <input
                  type="radio"
                  name="mannerRating"
                  value="4"
                  id="manner-4"
                  th:checked="${review.mannerRating == 4}"
                />
                <label for="manner-4">★</label>
                <input
                  type="radio"
                  name="mannerRating"
                  value="3"
                  id="manner-3"
                  th:checked="${review.mannerRating == 3}"
                />
                <label for="manner-3">★</label>
                <input
                  type="radio"
                  name="mannerRating"
                  value="2"
                  id="manner-2"
                  th:checked="${review.mannerRating == 2}"
                />
                <label for="manner-2">★</label>
                <input
                  type="radio"
                  name="mannerRating"
                  value="1"
                  id="manner-1"
                  th:checked="${review.mannerRating == 1}"
                />
                <label for="manner-1">★</label>
              </div>
            </div>

            <!--  코멘트 입력 -->
            <div class="comment-box">
              <label for="comment">의견을 남겨주세요:</label>
              <textarea
                class="form-control"
                id="comment"
                name="comment"
                rows="4"
                required
                th:text="${review.comment}"
              ></textarea>
            </div>

            <div class="btn-container">
              <button type="submit" class="submit-btn">리뷰 수정</button>
            </div>
          </form>
        </section>
      </div>
    </main>

    <!-- 푸터 -->
    <footer th:replace="~{fragments/footerTest :: footer}"></footer>
  </body>
</html>
